<div class="chat-container">
  

  <div class="chat-sidebar">
    <div class="p-input-icon-left search-box">
      <i class="pi pi-search"></i>
      <input pInputText type="text" placeholder="Search" />
    </div>

    <div *ngFor="let user of users" class="chat-user" (click)="selectUser(user)" [class.active]="selectedUser?.id === user.id">
        <p-avatar [image]="user.avatar" shape="circle" size="large"></p-avatar>
      <div class="user-info">
        <div class="user-name">{{ user.name }}</div>
        <div class="last-message">{{ user.lastMessage }}</div>
      </div>
      <div class="time">{{ user.time }}</div>
      <p-badge *ngIf="user.unread > 0" [value]="user.unread" severity="info"></p-badge>
    </div>
  </div>


  <div class="chat-main">
    <div class="messages">
      <div *ngFor="let msg of filteredMessages" class="message" [ngClass]="{'own': msg.own}">
        <p-avatar [image]="msg.avatar" shape="circle" size="normal" styleClass="mr-2"></p-avatar>
        <div class="message-content">
          <div class="bubble">{{ msg.content }}</div>
          <small>{{ msg.time }}</small>
        </div>
      </div>
    </div>

    <div class="message-input">
      <input pInputText [(ngModel)]="newMessage" placeholder="Write your message..." />
      <button pButton icon="pi pi-send" (click)="sendMessage()"></button>
    </div>
  </div>


  <!-- Right Sidebar: Show selected user's data -->
  <div class="chat-details" *ngIf="selectedUser">
    <h3>{{ selectedUser.name }}</h3>
    <p>
      <p-avatar [image]="selectedUser.avatar" shape="circle" size="large" styleClass="mr-2"></p-avatar>
      <span class="ml-2">{{ selectedUser.online ? 'Online' : 'Offline' }}</span>
    </p>
    <p><b>Last Message:</b> {{ selectedUser.lastMessage }}</p>
    <p><b>Time:</b> {{ selectedUser.time }}</p>
    
  </div>

  <!-- Optionally, show a placeholder if no user is selected -->
  <div class="chat-details" *ngIf="!selectedUser">
    <h3>Select a chat to view details</h3>
  </div>
</div>
